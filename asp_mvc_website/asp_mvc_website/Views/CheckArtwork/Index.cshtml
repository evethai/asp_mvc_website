@model Result
@{
	Layout = "/Views/Shared/_LayoutAd.cshtml";
}
<style>
	.shop_table.cart {
		width: 100%;
		border-collapse: collapse;
	}

		/* Style table header */
		.shop_table.cart th {
			background-color: #f2f2f2;
			padding: 10px;
			text-align: left;
			border: 1px solid #ddd;
		}

		/* Style table body */
		.shop_table.cart td {
			padding: 10px;
			text-align: left;
			border: 1px solid #ddd;
		}

			/* Add grid lines for each column */
			.shop_table.cart th.product-thumbnail,
			.shop_table.cart td.product-thumbnail {
				width: 20%;
			}

			.shop_table.cart th.product-name,
			.shop_table.cart td.product-name {
				width: 20%;
			}

			.shop_table.cart th.product-price,
			.shop_table.cart td.product-price {
				width: 20%;
			}

			.shop_table.cart th.product-subtotal,
			.shop_table.cart td.product-subtotal {
				width: 20%;
			}

			.shop_table.cart th.product-remove,
			.shop_table.cart td.product-remove {
				width: 20%;
			}

	.Accept {
		display: inline-block;
		padding: 5px 10px;
		background-color: #4CAF50; /* Green */
		color: white;
		text-decoration: none;
		border-radius: 3px;
		width: 70px;
		margin: auto;
	}

	/* Style reject button */
	.Reject {
		display: inline-block;
		padding: 5px 10px;
		background-color: #f44336; /* Red */
		color: white;
		text-decoration: none;
		border-radius: 3px;
		width: 70px;
		margin-top: 10px;
	}

		/* Hover effects */
		.Accept:hover,
		.Reject:hover {
			opacity: 0.8;
		}

	.tab-container {
		display: flex;
	}

	.tab-button {
		background-color: #f0f0f0;
		border: none;
		padding: 10px 20px;
		cursor: pointer;
		outline: none;
	}

		.tab-button:hover {
			background-color: #ddd;
		}

		.tab-button.active {
			background-color: #ccc;
		}

	.tab-content {
		display: none;
		padding: 20px;
	}

		.tab-content h2 {
			margin-top: 0;
		}

	/* Style for modal body */
	.modal-body {
		padding: 20px;
		text-align: center;
	}

		/* Style for the image */
		.modal-body img {
			width: 75%;
			margin-bottom: 15px;
		}

		/* Style for the titles */
		.modal-body h3 {
			font-size: 18px;
			margin-bottom: 10px;
		}

		/* Style for the description */
		.modal-body p {
			font-size: 16px;
			margin-bottom: 10px;
		}

		/* Style for the price */
		.modal-body .price {
			font-size: 20px;
			font-weight: bold;
			color: #007bff; /* Example color */
		}
</style>

@if (Model == null)
{
	<h2>No have any Notification!</h2>
}
else
{
	<div id="tabIndex">
		<div class="tab-container">
			<button class="tab-button active" onclick="openTab('tab1')">Tab 1</button>
			<button class="tab-button" onclick="openTab('tab2')">Tab 2</button>
			<button class="tab-button" onclick="openTab('tab3')">Tab 3</button>
		</div>
		<div class="tab-content" id="tab1" style="display:block">
			<h2>Notification new Post</h2>
			<form method="post">
				<table class="shop_table cart">
					<thead>
						<tr>
							<th>Artwork</th>
							<th>Title</th>
							<th>Description</th>
							<th>Date time</th>
							<th>Image</th>
							<th>Action</th>
						</tr>
					</thead>
					<tbody>
						@foreach (var item in Model.data)
						{
							if (item.NotificationVM.notiStatus == asp_mvc_website.Enums.NotiStatus.ConfirmPost)
							{
								<tr class="cart_table_item">

									<td class="product-thumbnail">
										<a href="#" data-bs-toggle="modal" data-bs-target="#exampleModal-@item.ArtWorkVM.ArtworkId"><h5>@item.ArtWorkVM.Title</h5></a>
									</td>

									<td class="product-name">
										<h6>@item.NotificationVM.Title</h6>
									</td>

									<td class="product-subtotal">
										<span class="amount"> @item.NotificationVM.Description</span>
									</td>

									<td class="product-status">
										<span class="">@item.Date</span>
									</td>

									<td class="product-remove">
										<a href=""><img src="@item.ArtWorkImageVM.Image" style="width:25%;" class="attachment-shop_thumbnail wp-post-image" alt="T_7_front" /></a>
									</td>
									<td>
										<input id="userID" value="@item.ArtWorkVM.UserId" type="hidden"/>
										<a href="@Url.Action("Index","CheckArtwork")" class="Accept" title="Accept artwork" onclick="acceptArtwork(@item.ArtWorkVM.ArtworkId,true,@item.NotificationVM.Id)">Accept</a>
										<a href="" data-bs-toggle="modal" data-bs-target="#reason-@item.ArtWorkVM.ArtworkId" class="Reject" title="Reject artwork" >Reject</a>

									</td>
								</tr>
								<div class="modal" tabindex="-1"  style="margin-top : 100px" id="exampleModal-@item.ArtWorkVM.ArtworkId" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
									<div class="modal-dialog modal-lg modal-dialog-scrollable">
										<div class="modal-content">
											<div class="modal-header">  
												<h5 class="modal-title" id="staticBackdropLabel">Artwork title</h5>
											</div>
											<div class="modal-body">
												<img src="@item.ArtWorkImageVM.Image" style="width:50%;" />
												<h3> Title : @item.ArtWorkVM.Title</h3>
												<h3>Description : @item.ArtWorkVM.Description</h3>
												<h3>Price : @item.ArtWorkVM.Price</h3>
											</div>
											<div class="modal-footer">
												<button type="button" class="btn btn-secondary" data-bs-dismiss="modal" id="closePackage">Close</button>
											</div>
										</div>
									</div>
								</div>

								<div class="modal" tabindex="-1" style="margin-top : 100px" id="reason-@item.ArtWorkVM.ArtworkId" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
									<div class="modal-dialog modal-lg modal-dialog-scrollable">
										<div class="modal-content">
											<div class="modal-header">
												<h5 class="modal-title" id="staticBackdropLabel">Artwork Reject</h5>
											</div>
											<div class="modal-body">
												<label for="reason">Reason</label>
													<textarea id="reason" name="reason" rows="4" cols="50"></textarea>
											</div>
											<div class="modal-footer">
												<button type="button" class="btn btn-secondary" data-bs-dismiss="modal" id="closePackage">Close</button>
												<button type="button" action="@Url.Action("Index","CheckArtwork")" class="Reject" onclick="acceptArtwork(@item.ArtWorkVM.ArtworkId,false,@item.NotificationVM.Id)">Reject</button>
											</div>
										</div>
									</div>
								</div>
							}
						}
					</tbody>
				</table>
			</form>
		</div>
		<div class="tab-content" id="tab2" style="display: none;">
			<h2>Confirm Post</h2>
			<form method="post">
				<table class="shop_table cart">
					<thead>
						<tr>
							<th>Artwork</th>
							<th>Title</th>
							<th>Description</th>
							<th>Date time</th>
							<th>Image</th>
							<th></th>
						</tr>
					</thead>
					<tbody>
						@foreach (var item in Model.data)
						{
							if (item.NotificationVM.notiStatus == asp_mvc_website.Enums.NotiStatus.AcceptPost)
							{
								<tr class="cart_table_item" >

									<td class="product-thumbnail">
										<a href="#" data-bs-toggle="modal" data-bs-target="#exampleModal-@item.ArtWorkVM.ArtworkId"><h5>@item.ArtWorkVM.Title</h5></a>
									</td>

									<td class="product-name">
										<h6>@item.NotificationVM.Title</h6>
									</td>

									<td class="product-subtotal">
										<span class="amount"> @item.NotificationVM.Description</span>
									</td>

									<td class="product-status">
										<span class="">@item.Date</span>
									</td>

									<td class="product-remove">
										<a href=""><img src="@item.ArtWorkImageVM.Image" style="width:25%;" class="attachment-shop_thumbnail wp-post-image" alt="T_7_front" /></a>
									</td>
									<td>
										<h4>Comfirm</h4>
									</td>
								</tr>
								<div class="modal" tabindex="-1" style="margin-top : 100px" id="exampleModal-@item.ArtWorkVM.ArtworkId" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
									<div class="modal-dialog modal-lg modal-dialog-scrollable">
										<div class="modal-content">
											<div class="modal-header">
												<h5 class="modal-title" id="staticBackdropLabel">Artwork title</h5>
											</div>
											<div class="modal-body">
												<img src="@item.ArtWorkImageVM.Image" style="width:50%;" />
												<h3> Title : @item.ArtWorkVM.Title</h3>
												<h3>Description : @item.ArtWorkVM.Description</h3>
												<h3>Price : @item.ArtWorkVM.Price</h3>
											</div>
											<div class="modal-footer">
												<button type="button" class="btn btn-secondary" data-bs-dismiss="modal" id="closePackage">Close</button>
											</div>
										</div>
									</div>
								</div>
							}
						}
					</tbody>
				</table>
			</form>
		</div>
		<div class="tab-content" id="tab3" style="display: none;">
			<h2>Deny Post</h2>
			<form method="post">
				<table class="shop_table cart">
					<thead>
						<tr>
							<th>Artwork</th>
							<th>Title</th>
							<th>Description</th>
							<th>Date time</th>
							<th>Image</th>
							<th></th>
						</tr>
					</thead>
					<tbody>
						@foreach (var item in Model.data)
						{
							if (item.NotificationVM.notiStatus == asp_mvc_website.Enums.NotiStatus.DenyPost)
							{
								<tr class="cart_table_item">

									<td class="product-thumbnail">
										<a href="#" data-bs-toggle="modal" data-bs-target="#exampleModal-@item.ArtWorkVM.ArtworkId"><h5>@item.ArtWorkVM.Title</h5></a>
									</td>

									<td class="product-name">
										<h6>@item.NotificationVM.Title</h6>
									</td>

									<td class="product-subtotal">
										<span class="amount"> @item.NotificationVM.Description</span>
									</td>

									<td class="product-status">
										<span class="">@item.Date</span>
									</td>

									<td class="product-remove">
										<a href=""><img src="@item.ArtWorkImageVM.Image" style="width:25%;" class="attachment-shop_thumbnail wp-post-image" alt="T_7_front" /></a>
									</td>
									<td>
										<h4>Reject</h4>
									</td>
								</tr>
								<div class="modal" tabindex="-1" style="margin-top : 100px" id="exampleModal-@item.ArtWorkVM.ArtworkId" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
									<div class="modal-dialog modal-lg modal-dialog-scrollable">
										<div class="modal-content">
											<div class="modal-header">
												<h5 class="modal-title" id="staticBackdropLabel">Artwork title</h5>
											</div>
											<div class="modal-body">
												<img src="@item.ArtWorkImageVM.Image" style="width:50%;" />
												<h3> Title : @item.ArtWorkVM.Title</h3>
												<h3>Description : @item.ArtWorkVM.Description</h3>
												<h3>Price : @item.ArtWorkVM.Price</h3>
											</div>
											<div class="modal-footer">
												<button type="button" class="btn btn-secondary" data-bs-dismiss="modal" id="closePackage">Close</button>
											</div>
										</div>
									</div>
								</div>
							}
						}
					</tbody>
				</table>
			</form>
		</div>
	</div>
	<div id="tab-container"></div>
}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
<script>
	function acceptArtwork(artworkId, isAccept, notiId) {
		var userId = document.getElementById("userID").value;
		var reason = document.getElementById("reason").value;
		$.ajax({
			url: "/CheckArtwork/CheckPost",
			type: "POST",
			data: { artworkId: artworkId, isAccept: isAccept, notiId: notiId, userId: userId, reason: reason },
			success: function (data) {
				window.location.reload(true);
			},
			error: function (xhr, status, error) {
				console.error('Đã có lỗi xảy ra: ' + error);
			}
		});
	}

	function openTab(tabId) {
		var i, tabContent, tabButton;

		tabContent = document.getElementsByClassName("tab-content");
		for (i = 0; i < tabContent.length; i++) {
			tabContent[i].style.display = "none";
		}

		tabButton = document.getElementsByClassName("tab-button");
		for (i = 0; i < tabButton.length; i++) {
			tabButton[i].className = tabButton[i].className.replace(" active", "");
		}

		document.getElementById(tabId).style.display = "block";
		event.currentTarget.className += " active";
	}
	var closeModal = document.getElementById("closePackage");
	closeModal.addEventListener('click', function () {
		modal.style.display = 'none';
	});
</script>
			
